# 正则表达式
1. 在编程时经常会碰到字符串处理的相关问题，正则表达式是一种用来匹配字符串的强大工具。

1. 基础规则
* 用\d可以匹配一个数字，\w可以匹配一个字母或数字
* .可以匹配任意字符
* 用*表示任意个字符（包括0个），用+表示至少一个字符，用?表示0个或1个字符，用{n}表示n个字符，用{n,m}表示n-m个字符
* \s可以匹配一个空格（也包括Tab等空白符）

    下面是一些匹配的例子:
    * `00\d`可以匹配'007'，但无法匹配'00A'
    * `\d\d\d`可以匹配'010'
    * `\w\w\d`可以匹配'py3'
    * `py.`可以匹配'pyc','pyo','py!'等等
    * `\d{3}\s+\d{3,8}`,`\d{3}`表示匹配3个数字，例如'010',`\s`可以匹配一个空格（也包括Tab等空白符），所以`\s+`表示至少有一个空格，例如匹配' '，' '等,`\d{3,8}`表示3-8个数字，例如'1234567'

3. 进阶  
要做更精确地匹配，可以用[]表示范围
* `[0-9a-zA-Z\_]`可以匹配一个数字、字母或者下划线
* `[0-9a-zA-Z\_]+`可以匹配至少由一个数字、字母或者下划线组成的字符串，比如'a100'，'0_Z'，'Py3000'等等
* `[a-zA-Z\_][0-9a-zA-Z\_]*`可以匹配由字母或下划线开头，后接任意个由一个数字、字母或者下划线组成的字符串，也就是Python合法的变量
* `[a-zA-Z\_][0-9a-zA-Z\_]{0, 19}`更精确地限制了变量的长度是1-20个字符（前面1个字符+后面最多19个字符）
* `A|B`可以匹配A或B，所以`(P|p)ython`可以匹配'Python'或者'python'
* `^`表示行的开头，`^\d`表示必须以数字开头
* `$`表示行的结束，`\d$`表示必须以数字结束

4.  re模块  
Python提供re模块，包含所有正则表达式的功能
使用Python的r前缀就不用考虑转义的问题了
可以利用match函数进行匹配:
    ``` Python
    import re
    text ='用户输入的字符串'
    if re.match(r'正则表达式', test):
        print('ok')
    else:
        print('failed')

    # Result
    # failed
    ```
1. 切分字符串  
先来看一个正常的切分代码:
    ``` Python
    print('a b   c'.split(' '))

    # Result
    # ['a', 'b', '', '', 'c']
    ```
    无法识别连续的空格
    ``` Python
    import re
    print(re.split(r'\s+', 'a b   c'))

    # Result
    # ['a', 'b', 'c']
    ```
    无论多少空格都可以正常分割
    ``` Python
    import re
    re.split(r'[\s\,\;]+', 'a,b;; c  d')

    # Result
    # ['a', 'b', 'c', 'd']
    ```
    在有,;的情况下也可以分割

1. 分组  
除了简单地判断是否匹配之外，正则表达式还有提取子串的强大功能。  
利用group函数实现分组功能:
    ``` Python
    import re
    m = re.match(r'^(\d{3})-(\d{3,8})$', '010-12345')
    print(m.group(0))
    print(m.group(1))
    print(m.group(2))

    # Result
    # 010-12345
    # 010
    # 12345
    ```
    group(0)永远是原始字符串，group(1)、group(2)……表示第1、2、……个子串

1. 贪婪匹配  
正则匹配默认是贪婪匹配，也就是匹配尽可能多的字符:
    ``` Python
    import re
    print(re.match(r'^(\d+)(0*)$', '102300').groups())

    # Result
    # ('102300', '')
    ```
    由于\d+采用贪婪匹配，直接把后面的0全部匹配了，结果0*只能匹配空字符串了
    ``` Python
    import re
    print(re.match(r'^(\d+?)(0*)$', '102300').groups())

    # Result
    # ('1023', '00')
    ```
